<!-- ==============================================
     Products Management - Enterprise ERP Style
     Matching Reference Images (Desktop/Tablet/Mobile)
     ============================================== -->

<div [attr.dir]="dir" class="min-h-full bg-slate-50">

    <!-- ==================== DESKTOP/TABLET VIEW ==================== -->
    <div class="hidden md:block p-6 lg:p-8 space-y-6">

        <!-- Breadcrumb -->
        <nav class="flex items-center gap-2 text-sm text-slate-500">
            <a routerLink="/dashboard" class="hover:text-indigo-600 transition-colors">
                {{ 'COMMON.HOME' | translate }}
            </a>
            <i class="fas fa-chevron-right text-xs text-slate-300 rtl:rotate-180"></i>
            <span class="text-slate-400">{{ 'SIDEBAR.INVENTORY' | translate }}</span>
            <i class="fas fa-chevron-right text-xs text-slate-300 rtl:rotate-180"></i>
            <span class="text-slate-800 font-medium">{{ 'PRODUCTS.TITLE' | translate }}</span>
        </nav>

        <!-- Page Header -->
        <div class="flex flex-col lg:flex-row lg:items-start lg:justify-between gap-4">
            <div>
                <h1 class="text-2xl font-bold text-slate-800">
                    {{ 'PRODUCTS.MANAGEMENT_TITLE' | translate }}
                </h1>
                <p class="mt-1 text-sm text-slate-500">
                    {{ 'PRODUCTS.MANAGEMENT_SUBTITLE' | translate }}
                </p>
            </div>

            <!-- Action Buttons -->
            <div class="flex items-center gap-3">
                <button
                    class="inline-flex items-center gap-2 px-4 py-2.5 bg-white border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all duration-200">
                    <i class="fas fa-file-import text-sm"></i>
                    {{ 'COMMON.IMPORT' | translate }}
                </button>
                <button
                    class="inline-flex items-center gap-2 px-4 py-2.5 bg-white border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 hover:border-slate-300 transition-all duration-200">
                    <i class="fas fa-download text-sm"></i>
                    {{ 'COMMON.EXPORT' | translate }}
                </button>
                <a routerLink="/products/add"
                    class="inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-all duration-200 shadow-lg shadow-indigo-200 hover:-translate-y-0.5 active:scale-[0.98]">
                    <i class="fas fa-plus"></i>
                    {{ 'PRODUCTS.CREATE_PRODUCT' | translate }}
                </a>
            </div>
        </div>

        <!-- Toolbar: Search + Filters + Sort -->
        <div class="bg-white rounded-xl border border-slate-200 shadow-sm p-4">
            <div class="flex flex-col lg:flex-row lg:items-center gap-4">
                <!-- Search -->
                <div class="relative flex-1 max-w-md">
                    <i class="fas fa-search absolute start-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                    <input type="text" [formControl]="searchControl"
                        [placeholder]="'PRODUCTS.SEARCH_PLACEHOLDER' | translate"
                        class="w-full ps-11 pe-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent focus:bg-white transition-all duration-200">
                </div>

                <!-- Filters Button -->
                <button
                    class="inline-flex items-center gap-2 px-4 py-2.5 bg-slate-50 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-100 transition-colors">
                    <i class="fas fa-filter text-sm"></i>
                    {{ 'COMMON.FILTER' | translate }}
                    <span class="px-1.5 py-0.5 bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-md">3</span>
                </button>

                <!-- Sort Dropdown -->
                <div class="relative sort-dropdown">
                    <button (click)="toggleSortDropdown()"
                        class="inline-flex items-center gap-2 px-4 py-2.5 bg-white border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 transition-colors">
                        <span class="text-slate-500 text-sm">{{ 'PRODUCTS.SORT_BY' | translate }}:</span>
                        <span class="text-sm font-semibold">{{ getSortLabel() }}</span>
                        <i class="fas fa-chevron-down text-xs text-slate-400 transition-transform duration-200"
                            [class.rotate-180]="showSortDropdown"></i>
                    </button>

                    <div *ngIf="showSortDropdown"
                        class="absolute end-0 top-full mt-2 w-48 bg-white border border-slate-200 rounded-xl shadow-lg z-20 py-1 animate-fade-in">
                        <button (click)="setSort('updatedAt')"
                            class="w-full px-4 py-2 text-start text-sm hover:bg-slate-50 transition-colors"
                            [class.text-indigo-600]="sortField === 'updatedAt'"
                            [class.font-semibold]="sortField === 'updatedAt'">
                            {{ 'PRODUCTS.SORT_LAST_UPDATED' | translate }}
                        </button>
                        <button (click)="setSort('name')"
                            class="w-full px-4 py-2 text-start text-sm hover:bg-slate-50 transition-colors"
                            [class.text-indigo-600]="sortField === 'name'" [class.font-semibold]="sortField === 'name'">
                            {{ 'PRODUCTS.SORT_NAME' | translate }}
                        </button>
                        <button (click)="setSort('unitPrice')"
                            class="w-full px-4 py-2 text-start text-sm hover:bg-slate-50 transition-colors"
                            [class.text-indigo-600]="sortField === 'unitPrice'"
                            [class.font-semibold]="sortField === 'unitPrice'">
                            {{ 'PRODUCTS.SORT_PRICE' | translate }}
                        </button>
                        <button (click)="setSort('sku')"
                            class="w-full px-4 py-2 text-start text-sm hover:bg-slate-50 transition-colors"
                            [class.text-indigo-600]="sortField === 'sku'" [class.font-semibold]="sortField === 'sku'">
                            {{ 'PRODUCTS.SORT_SKU' | translate }}
                        </button>
                    </div>
                </div>
            </div>

            <!-- Filter Chips -->
            <div class="flex items-center gap-2 mt-4 pt-4 border-t border-slate-100">
                <span class="text-xs font-medium text-slate-500 uppercase tracking-wide">{{ 'PRODUCTS.ACTIVE_FILTERS' |
                    translate }}:</span>

                <button (click)="setFilter('all')"
                    class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200" [ngClass]="activeFilter === 'all' 
                            ? 'bg-indigo-600 text-white shadow-sm' 
                            : 'bg-slate-100 text-slate-600 hover:bg-slate-200'">
                    {{ 'PRODUCTS.FILTER_ALL' | translate }}
                </button>

                <button (click)="setFilter('active')"
                    class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200" [ngClass]="activeFilter === 'active' 
                            ? 'bg-emerald-600 text-white shadow-sm' 
                            : 'bg-slate-100 text-slate-600 hover:bg-slate-200'">
                    {{ 'PRODUCTS.FILTER_ACTIVE' | translate }}
                </button>

                <button (click)="setFilter('inactive')"
                    class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200" [ngClass]="activeFilter === 'inactive' 
                            ? 'bg-slate-600 text-white shadow-sm' 
                            : 'bg-slate-100 text-slate-600 hover:bg-slate-200'">
                    {{ 'PRODUCTS.FILTER_INACTIVE' | translate }}
                </button>

                <button (click)="setFilter('low-stock')"
                    class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200" [ngClass]="activeFilter === 'low-stock' 
                            ? 'bg-amber-500 text-white shadow-sm' 
                            : 'bg-slate-100 text-slate-600 hover:bg-slate-200'">
                    <i class="fas fa-exclamation-triangle text-xs me-1"></i>
                    {{ 'PRODUCTS.FILTER_LOW_STOCK' | translate }}
                </button>

                <button (click)="setFilter('out-of-stock')"
                    class="px-3 py-1.5 rounded-lg text-sm font-medium transition-all duration-200" [ngClass]="activeFilter === 'out-of-stock' 
                            ? 'bg-red-500 text-white shadow-sm' 
                            : 'bg-slate-100 text-slate-600 hover:bg-slate-200'">
                    <i class="fas fa-times-circle text-xs me-1"></i>
                    {{ 'PRODUCTS.FILTER_OUT_OF_STOCK' | translate }}
                </button>

                <button *ngIf="activeFilter !== 'all'" (click)="setFilter('all')"
                    class="ms-auto text-sm text-slate-500 hover:text-slate-700 transition-colors">
                    {{ 'PRODUCTS.CLEAR_ALL' | translate }}
                </button>
            </div>
        </div>

        <!-- Products Table -->
        <div class="bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden">

            <!-- Loading Skeleton -->
            <div *ngIf="isLoading" class="divide-y divide-slate-100">
                <div *ngFor="let i of [1,2,3,4,5]" class="p-4 flex items-center gap-4 animate-pulse">
                    <div class="w-5 h-5 bg-slate-200 rounded"></div>
                    <div class="w-12 h-12 bg-slate-200 rounded-lg"></div>
                    <div class="flex-1 space-y-2">
                        <div class="h-4 bg-slate-200 rounded w-1/3"></div>
                        <div class="h-3 bg-slate-100 rounded w-1/4"></div>
                    </div>
                    <div class="h-4 bg-slate-200 rounded w-20"></div>
                    <div class="h-4 bg-slate-200 rounded w-16"></div>
                    <div class="h-6 bg-slate-200 rounded-full w-16"></div>
                </div>
            </div>

            <!-- Empty State -->
            <div *ngIf="!isLoading && products.length === 0" class="py-16 text-center">
                <div class="w-20 h-20 mx-auto mb-4 bg-slate-100 rounded-2xl flex items-center justify-center">
                    <i class="fas fa-box-open text-3xl text-slate-400"></i>
                </div>
                <h3 class="text-lg font-semibold text-slate-800 mb-1">{{ 'PRODUCTS.EMPTY_TITLE' | translate }}</h3>
                <p class="text-sm text-slate-500 mb-6 max-w-sm mx-auto">{{ 'PRODUCTS.EMPTY_DESC' | translate }}</p>
                <a routerLink="/products/add"
                    class="inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 transition-all">
                    <i class="fas fa-plus"></i>
                    {{ 'PRODUCTS.CREATE_PRODUCT' | translate }}
                </a>
            </div>

            <!-- Table -->
            <table *ngIf="!isLoading && products.length > 0" class="w-full">
                <thead class="bg-slate-50 border-b border-slate-200">
                    <tr>
                        <th class="w-12 px-4 py-3">
                            <input type="checkbox" [checked]="isAllSelected" (change)="toggleSelectAll()"
                                class="w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500">
                        </th>
                        <th class="px-4 py-3 text-start text-xs font-semibold text-slate-500 uppercase tracking-wide">
                            {{ 'PRODUCTS.COLUMN_PRODUCT' | translate }}
                        </th>
                        <th class="px-4 py-3 text-start text-xs font-semibold text-slate-500 uppercase tracking-wide">
                            {{ 'PRODUCTS.COLUMN_SKU' | translate }}
                        </th>
                        <th
                            class="px-4 py-3 text-start text-xs font-semibold text-slate-500 uppercase tracking-wide hidden lg:table-cell">
                            {{ 'PRODUCTS.COLUMN_BRAND' | translate }}
                        </th>
                        <th
                            class="px-4 py-3 text-start text-xs font-semibold text-slate-500 uppercase tracking-wide hidden lg:table-cell">
                            {{ 'PRODUCTS.COLUMN_CATEGORY' | translate }}
                        </th>
                        <th class="px-4 py-3 text-start text-xs font-semibold text-slate-500 uppercase tracking-wide">
                            {{ 'PRODUCTS.COLUMN_STOCK' | translate }}
                        </th>
                        <th class="px-4 py-3 text-start text-xs font-semibold text-slate-500 uppercase tracking-wide">
                            {{ 'PRODUCTS.COLUMN_PRICE' | translate }}
                        </th>
                        <th class="px-4 py-3 text-start text-xs font-semibold text-slate-500 uppercase tracking-wide">
                            {{ 'COMMON.STATUS' | translate }}
                        </th>
                        <th
                            class="px-4 py-3 text-start text-xs font-semibold text-slate-500 uppercase tracking-wide hidden xl:table-cell">
                            {{ 'PRODUCTS.COLUMN_UPDATED' | translate }}
                        </th>
                        <th class="px-4 py-3 text-end text-xs font-semibold text-slate-500 uppercase tracking-wide">
                            {{ 'COMMON.ACTIONS' | translate }}
                        </th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-100">
                    <tr *ngFor="let product of products; let even = even"
                        class="transition-colors duration-200 hover:bg-slate-50"
                        [class.bg-indigo-50]="isSelected(product.id)">

                        <!-- Checkbox -->
                        <td class="px-4 py-3">
                            <input type="checkbox" [checked]="isSelected(product.id)"
                                (change)="toggleSelection(product.id)"
                                class="w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500">
                        </td>

                        <!-- Product -->
                        <td class="px-4 py-3">
                            <div class="flex items-center gap-3">
                                <div
                                    class="w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0">
                                    <img *ngIf="product.primaryImageUrl" [src]="product.primaryImageUrl"
                                        [alt]="product.name" class="w-full h-full object-cover">
                                    <i *ngIf="!product.primaryImageUrl" class="fas fa-box text-slate-400"></i>
                                </div>
                                <div class="min-w-0">
                                    <a [routerLink]="['/products', product.id]"
                                        class="font-medium text-slate-800 hover:text-indigo-600 transition-colors truncate block">
                                        {{ product.name }}
                                    </a>
                                    <p class="text-xs text-slate-500 truncate">{{ product.shortDescription || '-' }}</p>
                                </div>
                            </div>
                        </td>

                        <!-- SKU -->
                        <td class="px-4 py-3">
                            <span class="text-sm font-mono text-slate-600">{{ product.sku }}</span>
                        </td>

                        <!-- Brand -->
                        <td class="px-4 py-3 hidden lg:table-cell">
                            <span class="text-sm text-slate-600">{{ product.brandName }}</span>
                        </td>

                        <!-- Category -->
                        <td class="px-4 py-3 hidden lg:table-cell">
                            <span class="px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded-md">
                                {{ product.categoryName }}
                            </span>
                        </td>

                        <!-- Stock -->
                        <td class="px-4 py-3">
                            <div class="flex items-center gap-2">
                                <span class="text-sm font-semibold text-slate-700">{{ getStockQty(product) }}</span>
                                <span class="px-2 py-0.5 text-xs font-medium rounded-full"
                                    [ngClass]="getStockBadgeClass(getStockStatus(product))">
                                    <ng-container [ngSwitch]="getStockStatus(product)">
                                        <span *ngSwitchCase="'in-stock'">{{ 'PRODUCTS.IN_STOCK' | translate }}</span>
                                        <span *ngSwitchCase="'low-stock'">{{ 'PRODUCTS.LOW_STOCK' | translate }}</span>
                                        <span *ngSwitchCase="'out-of-stock'">{{ 'PRODUCTS.OUT_OF_STOCK' | translate
                                            }}</span>
                                    </ng-container>
                                </span>
                            </div>
                        </td>

                        <!-- Price -->
                        <td class="px-4 py-3">
                            <span class="text-sm font-semibold text-slate-800">{{ formatPrice(product.unitPrice)
                                }}</span>
                        </td>

                        <!-- Status -->
                        <td class="px-4 py-3">
                            <span class="inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium"
                                [ngClass]="getStatusBadgeClass(product.isActive)">
                                <span class="w-1.5 h-1.5 rounded-full" [class.bg-emerald-500]="product.isActive"
                                    [class.bg-slate-400]="!product.isActive"></span>
                                {{ product.isActive ? ('COMMON.ACTIVE' | translate) : ('COMMON.INACTIVE' | translate) }}
                            </span>
                        </td>

                        <!-- Updated -->
                        <td class="px-4 py-3 hidden xl:table-cell">
                            <span class="text-sm text-slate-500">{{ formatDate(product.createdAt) }}</span>
                        </td>

                        <!-- Actions -->
                        <td class="px-4 py-3 text-end">
                            <div class="flex items-center justify-end gap-1">
                                <a [routerLink]="['/products', product.id]"
                                    class="p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors"
                                    [attr.aria-label]="'COMMON.VIEW' | translate">
                                    <i class="fas fa-eye"></i>
                                </a>
                                <a [routerLink]="['/products', product.id, 'edit']"
                                    class="p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors"
                                    [attr.aria-label]="'COMMON.EDIT' | translate">
                                    <i class="fas fa-pen"></i>
                                </a>
                                <button (click)="deleteProduct(product)"
                                    class="p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                                    [attr.aria-label]="'COMMON.DELETE' | translate">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Pagination -->
            <div *ngIf="!isLoading && products.length > 0"
                class="px-4 py-3 border-t border-slate-200 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 bg-slate-50">
                <div class="text-sm text-slate-600">
                    {{ 'COMMON.SHOWING' | translate }} {{ showingFrom }} {{ 'COMMON.TO' | translate }} {{ showingTo }}
                    {{ 'COMMON.OF' | translate }} {{ totalCount }} {{ 'COMMON.RESULTS' | translate }}
                </div>

                <div class="flex items-center gap-2">
                    <button (click)="onPageChange(pageNumber - 1)" [disabled]="pageNumber === 1"
                        class="px-3 py-1.5 text-sm font-medium bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                        {{ 'COMMON.PREVIOUS' | translate }}
                    </button>

                    <div class="flex items-center gap-1">
                        <button *ngFor="let page of pagesArray" (click)="onPageChange(page)"
                            class="w-8 h-8 text-sm font-medium rounded-lg transition-colors" [ngClass]="page === pageNumber 
                                    ? 'bg-indigo-600 text-white' 
                                    : 'bg-white border border-slate-200 text-slate-600 hover:bg-slate-50'">
                            {{ page }}
                        </button>
                    </div>

                    <button (click)="onPageChange(pageNumber + 1)" [disabled]="pageNumber === totalPages"
                        class="px-3 py-1.5 text-sm font-medium bg-white border border-slate-200 rounded-lg hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">
                        {{ 'COMMON.NEXT' | translate }}
                    </button>
                </div>
            </div>
        </div>

        <!-- Bulk Actions Bar -->
        <div *ngIf="selectedCount > 0"
            class="fixed bottom-6 start-1/2 -translate-x-1/2 bg-slate-800 text-white px-6 py-3 rounded-2xl shadow-2xl flex items-center gap-4 z-50 animate-slide-up">
            <span class="text-sm font-medium">
                <span class="bg-indigo-500 px-2 py-0.5 rounded-md me-2">{{ selectedCount }}</span>
                {{ 'PRODUCTS.SELECTED' | translate }}
            </span>

            <div class="h-6 w-px bg-slate-600"></div>

            <button (click)="bulkActivate()"
                class="flex items-center gap-2 px-3 py-1.5 bg-emerald-500 text-white text-sm font-medium rounded-lg hover:bg-emerald-600 transition-colors">
                <i class="fas fa-check"></i>
                {{ 'PRODUCTS.BULK_ACTIVATE' | translate }}
            </button>

            <button (click)="bulkDeactivate()"
                class="flex items-center gap-2 px-3 py-1.5 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-500 transition-colors">
                <i class="fas fa-archive"></i>
                {{ 'PRODUCTS.BULK_ARCHIVE' | translate }}
            </button>

            <button (click)="confirmBulkDelete()"
                class="flex items-center gap-2 px-3 py-1.5 bg-red-500 text-white text-sm font-medium rounded-lg hover:bg-red-600 transition-colors">
                <i class="fas fa-trash"></i>
                {{ 'PRODUCTS.BULK_DELETE' | translate }}
            </button>

            <button (click)="clearSelection()" class="p-1.5 text-slate-400 hover:text-white transition-colors">
                <i class="fas fa-times"></i>
            </button>
        </div>
    </div>

    <!-- ==================== MOBILE VIEW ==================== -->
    <div class="md:hidden min-h-screen flex flex-col bg-slate-50">

        <!-- Mobile Content -->
        <div class="flex-1 overflow-y-auto p-4 pb-40 space-y-4">

            <!-- Page Title -->
            <div>
                <h2 class="text-xl font-bold text-slate-800">{{ 'PRODUCTS.LIST_TITLE' | translate }}</h2>
                <p class="text-sm text-slate-500">{{ 'PRODUCTS.LIST_SUBTITLE' | translate }}</p>
            </div>

            <!-- Mobile Search -->
            <div class="relative">
                <i class="fas fa-search absolute start-4 top-1/2 -translate-y-1/2 text-slate-400"></i>
                <input type="text" [formControl]="searchControl"
                    [placeholder]="'PRODUCTS.MOBILE_SEARCH_PLACEHOLDER' | translate"
                    class="w-full ps-11 pe-4 py-3 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all">
            </div>

            <!-- Mobile Filter Chips -->
            <div class="flex items-center gap-2 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide">
                <button (click)="setFilter('all')"
                    class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all" [ngClass]="activeFilter === 'all' 
                            ? 'bg-indigo-600 text-white' 
                            : 'bg-white border border-slate-200 text-slate-600'">
                    {{ 'PRODUCTS.FILTER_ALL' | translate }}
                </button>

                <button (click)="setFilter('low-stock')"
                    class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1.5"
                    [ngClass]="activeFilter === 'low-stock' 
                            ? 'bg-amber-500 text-white' 
                            : 'bg-white border border-slate-200 text-slate-600'">
                    <i class="fas fa-exclamation-triangle text-xs"></i>
                    {{ 'PRODUCTS.FILTER_LOW_STOCK' | translate }}
                </button>

                <button (click)="setFilter('out-of-stock')"
                    class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all flex items-center gap-1.5"
                    [ngClass]="activeFilter === 'out-of-stock' 
                            ? 'bg-red-500 text-white' 
                            : 'bg-white border border-slate-200 text-slate-600'">
                    <i class="fas fa-times-circle text-xs"></i>
                    {{ 'PRODUCTS.FILTER_OUT_OF_STOCK' | translate }}
                </button>

                <button (click)="setFilter('active')"
                    class="flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium transition-all" [ngClass]="activeFilter === 'active' 
                            ? 'bg-emerald-500 text-white' 
                            : 'bg-white border border-slate-200 text-slate-600'">
                    {{ 'PRODUCTS.FILTER_ACTIVE' | translate }}
                </button>
            </div>

            <!-- Mobile Loading -->
            <div *ngIf="isLoading" class="space-y-3">
                <div *ngFor="let i of [1,2,3,4]" class="bg-white rounded-2xl border border-slate-200 p-4 animate-pulse">
                    <div class="flex gap-3">
                        <div class="w-16 h-16 bg-slate-200 rounded-xl"></div>
                        <div class="flex-1 space-y-2">
                            <div class="h-4 bg-slate-200 rounded w-3/4"></div>
                            <div class="h-3 bg-slate-100 rounded w-1/2"></div>
                            <div class="h-3 bg-slate-100 rounded w-1/4"></div>
                        </div>
                        <div class="h-5 bg-slate-200 rounded w-16"></div>
                    </div>
                </div>
            </div>

            <!-- Mobile Product Cards -->
            <div *ngIf="!isLoading" class="space-y-3">
                <div *ngFor="let product of products"
                    class="bg-white rounded-2xl border border-slate-200 p-4 hover:shadow-md transition-shadow">
                    <div class="flex gap-3">
                        <!-- Product Image -->
                        <div
                            class="w-16 h-16 bg-slate-100 rounded-xl flex items-center justify-center overflow-hidden flex-shrink-0">
                            <img *ngIf="product.primaryImageUrl" [src]="product.primaryImageUrl" [alt]="product.name"
                                class="w-full h-full object-cover">
                            <i *ngIf="!product.primaryImageUrl" class="fas fa-box text-xl text-slate-400"></i>
                        </div>

                        <!-- Product Info -->
                        <div class="flex-1 min-w-0">
                            <div class="flex items-start justify-between gap-2">
                                <h3 class="font-semibold text-slate-800 truncate">{{ product.name }}</h3>
                                <span class="text-indigo-600 font-bold text-sm flex-shrink-0">{{
                                    formatPrice(product.unitPrice) }}</span>
                            </div>

                            <p class="text-xs text-slate-500 mt-0.5">SKU: {{ product.sku }}</p>

                            <div class="flex items-center gap-2 mt-2">
                                <span class="px-2 py-0.5 bg-slate-100 text-slate-600 text-xs rounded-md">{{
                                    product.categoryName }}</span>
                                <span class="px-2 py-0.5 bg-slate-100 text-slate-600 text-xs rounded-md">{{
                                    product.brandName }}</span>
                            </div>
                        </div>
                    </div>

                    <!-- Card Footer -->
                    <div class="flex items-center justify-between mt-3 pt-3 border-t border-slate-100">
                        <span class="inline-flex items-center gap-1.5 px-2 py-0.5 rounded-full text-xs font-medium"
                            [ngClass]="getStockBadgeClass(getStockStatus(product))">
                            <ng-container [ngSwitch]="getStockStatus(product)">
                                <ng-container *ngSwitchCase="'in-stock'">
                                    <i class="fas fa-check-circle"></i>
                                    {{ 'PRODUCTS.IN_STOCK' | translate }} ({{ getStockQty(product) }})
                                </ng-container>
                                <ng-container *ngSwitchCase="'low-stock'">
                                    <i class="fas fa-exclamation-circle"></i>
                                    {{ 'PRODUCTS.LOW_STOCK' | translate }} ({{ getStockQty(product) }})
                                </ng-container>
                                <ng-container *ngSwitchCase="'out-of-stock'">
                                    <i class="fas fa-times-circle"></i>
                                    {{ 'PRODUCTS.OUT_OF_STOCK' | translate }}
                                </ng-container>
                            </ng-container>
                        </span>

                        <div class="flex items-center gap-2">
                            <a [routerLink]="['/products', product.id]"
                                class="px-3 py-1 text-xs font-medium text-slate-600 hover:text-indigo-600 transition-colors">
                                {{ 'COMMON.VIEW' | translate }}
                            </a>
                            <a [routerLink]="['/products', product.id, 'edit']"
                                class="px-3 py-1 text-xs font-medium bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors">
                                {{ 'COMMON.EDIT' | translate }}
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mobile Empty State -->
            <div *ngIf="!isLoading && products.length === 0" class="py-12 text-center">
                <div class="w-16 h-16 mx-auto mb-4 bg-slate-100 rounded-2xl flex items-center justify-center">
                    <i class="fas fa-box-open text-2xl text-slate-400"></i>
                </div>
                <h3 class="text-lg font-semibold text-slate-800 mb-1">{{ 'PRODUCTS.EMPTY_TITLE' | translate }}</h3>
                <p class="text-sm text-slate-500 mb-4">{{ 'PRODUCTS.EMPTY_DESC' | translate }}</p>
            </div>
        </div>

        <!-- Mobile FAB -->
        <a routerLink="/products/add"
            class="fixed bottom-24 end-4 w-14 h-14 bg-indigo-600 text-white rounded-2xl shadow-lg flex items-center justify-center hover:bg-indigo-700 active:scale-95 transition-all z-40">
            <i class="fas fa-plus text-xl"></i>
        </a>

        <!-- Mobile Bottom Tabs (handled by global layout) -->
    </div>
</div>

<!-- Delete Confirmation Modal -->
<app-confirm-modal *ngIf="showDeleteModal" [config]="deleteModalConfig" (confirmed)="onConfirmDelete()"
    (cancelled)="closeDeleteModal()">
</app-confirm-modal>

<!-- Bulk Delete Modal -->
<app-confirm-modal *ngIf="showBulkDeleteModal" [config]="bulkDeleteModalConfig" (confirmed)="onConfirmBulkDelete()"
    (cancelled)="closeBulkDeleteModal()">
</app-confirm-modal>