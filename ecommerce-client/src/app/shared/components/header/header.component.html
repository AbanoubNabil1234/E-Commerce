<header
    class="h-16 bg-white dark:bg-slate-800 border-b border-slate-200 dark:border-slate-700 flex items-center justify-between px-4 lg:px-6 sticky top-0 z-30">

    <!-- Left Section: Mobile Toggle & Breadcrumbs -->
    <div class="flex items-center gap-4">
        <!-- Mobile Toggle (only on mobile <768px) -->
        <button (click)="toggleMobile.emit()"
            class="md:hidden p-2 -ms-2 text-slate-500 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-xl transition-all duration-200 active:scale-95"
            aria-label="Toggle menu">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>

        <!-- Breadcrumbs (Tablet & Desktop) -->
        <nav class="hidden md:flex items-center text-sm font-medium">
            <span class="text-slate-800 dark:text-white font-bold">
                {{ 'DASHBOARD.OVERVIEW' | translate }}
            </span>
            <svg class="mx-2 w-4 h-4 text-slate-300 rtl:rotate-180" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
            </svg>
            <span class="text-slate-500 dark:text-slate-400">
                {{ 'DASHBOARD.TITLE' | translate }}
            </span>
        </nav>

        <!-- Mobile Title -->
        <span class="md:hidden text-lg font-bold text-slate-800 dark:text-white">
            {{ 'DASHBOARD.TITLE' | translate }}
        </span>
    </div>

    <!-- Center: Search (Tablet & Desktop) -->
    <div class="hidden md:flex flex-1 max-w-md mx-4 lg:mx-8">
        <div class="relative w-full">
            <div class="absolute inset-y-0 start-0 ps-3 flex items-center pointer-events-none">
                <svg class="h-4 w-4 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                </svg>
            </div>
            <input type="text"
                class="block w-full ps-10 pe-4 py-2 bg-slate-50 dark:bg-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl text-sm placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"
                [placeholder]="'HEADER.SEARCH_PLACEHOLDER' | translate">
        </div>
    </div>

    <!-- Right: Actions -->
    <div class="flex items-center gap-2">
        <!-- Notifications -->
        <app-notification-dropdown></app-notification-dropdown>

        <!-- Language Switcher -->
        <app-language-switcher></app-language-switcher>

        <!-- Primary Action Button (Tablet & Desktop) -->
        <button
            class="hidden md:inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-medium rounded-xl transition-all active:scale-95 shadow-lg shadow-indigo-200 dark:shadow-none">
            <i class="fas fa-plus"></i>
            <span class="hidden lg:inline">{{ 'COMMON.CREATE_ORDER' | translate }}</span>
            <span class="lg:hidden">{{ 'COMMON.CREATE' | translate }}</span>
        </button>

        <!-- User Avatar (Mobile) -->
        <div class="md:hidden relative">
            <button class="p-1">
                <div
                    class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-400 to-indigo-600 flex items-center justify-center">
                    <span class="text-xs font-bold text-white">AM</span>
                </div>
            </button>
        </div>

        <!-- User Dropdown (Tablet & Desktop) -->
        <div class="hidden md:block relative" (click)="toggleUserMenu()">
            <button
                class="flex items-center gap-2 p-1.5 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 transition-all">
                <div
                    class="w-8 h-8 rounded-full bg-gradient-to-br from-indigo-400 to-indigo-600 flex items-center justify-center">
                    <span class="text-xs font-bold text-white">AM</span>
                </div>
                <span class="hidden lg:block text-sm font-medium text-slate-700 dark:text-slate-300">Alex</span>
                <svg class="hidden lg:block w-4 h-4 text-slate-400" [class.rotate-180]="isUserMenuOpen" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                </svg>
            </button>

            <!-- Dropdown Menu -->
            <div *ngIf="isUserMenuOpen"
                class="absolute end-0 mt-2 w-48 bg-white dark:bg-slate-800 rounded-xl shadow-xl border border-slate-100 dark:border-slate-700 py-2 z-50">
                <a href="#"
                    class="flex items-center gap-3 px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors">
                    <i class="fas fa-user text-slate-400"></i>
                    {{ 'COMMON.PROFILE' | translate }}
                </a>
                <a href="#"
                    class="flex items-center gap-3 px-4 py-2 text-sm text-slate-700 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors">
                    <i class="fas fa-cog text-slate-400"></i>
                    {{ 'COMMON.SETTINGS' | translate }}
                </a>
                <hr class="my-2 border-slate-100 dark:border-slate-700">
                <a href="#"
                    class="flex items-center gap-3 px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors">
                    <i class="fas fa-sign-out-alt"></i>
                    {{ 'COMMON.LOGOUT' | translate }}
                </a>
            </div>
        </div>
    </div>
</header>

<!-- Click outside to close dropdown -->
<div *ngIf="isUserMenuOpen" class="fixed inset-0 z-20" (click)="isUserMenuOpen = false"></div>