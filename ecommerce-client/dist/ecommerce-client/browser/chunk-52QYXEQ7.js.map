{
  "version": 3,
  "sources": ["src/app/features/inventory/services/inventory.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable, tap } from 'rxjs';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { NotificationService } from '../../../core/services/notification.service';\r\nimport {\r\n    ProductStock,\r\n    StockMovement,\r\n    ProductStockSummary,\r\n    InitializeStockRequest,\r\n    AdjustStockRequest,\r\n    TransferStockRequest\r\n} from '../models/inventory.models';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class InventoryService {\r\n    private http = inject(HttpClient);\r\n    private toast = inject(NotificationService);\r\n    private apiUrl = `${environment.apiUrl}/inventory`;\r\n\r\n    getAllStock(warehouseId?: number, lowStockOnly?: boolean): Observable<ProductStock[]> {\r\n        let params = new HttpParams();\r\n        if (warehouseId) params = params.set('warehouseId', warehouseId);\r\n        if (lowStockOnly) params = params.set('lowStockOnly', true);\r\n\r\n        return this.http.get<ProductStock[]>(this.apiUrl, { params });\r\n    }\r\n\r\n    getStockByProduct(productId: number, warehouseId: number): Observable<ProductStock> {\r\n        return this.http.get<ProductStock>(\r\n            `${this.apiUrl}/product/${productId}`,\r\n            { params: new HttpParams().set('warehouseId', warehouseId) }\r\n        );\r\n    }\r\n\r\n    getStockSummary(productId: number): Observable<ProductStockSummary> {\r\n        return this.http.get<ProductStockSummary>(`${this.apiUrl}/product/${productId}/summary`);\r\n    }\r\n\r\n    getMovementHistory(\r\n        productId: number,\r\n        warehouseId?: number,\r\n        pageNumber: number = 1,\r\n        pageSize: number = 20\r\n    ): Observable<StockMovement[]> {\r\n        let params = new HttpParams()\r\n            .set('pageNumber', pageNumber)\r\n            .set('pageSize', pageSize);\r\n\r\n        if (warehouseId) params = params.set('warehouseId', warehouseId);\r\n\r\n        return this.http.get<StockMovement[]>(`${this.apiUrl}/movements/${productId}`, { params });\r\n    }\r\n\r\n    getLowStockProducts(warehouseId?: number): Observable<ProductStock[]> {\r\n        let params = new HttpParams();\r\n        if (warehouseId) params = params.set('warehouseId', warehouseId);\r\n        return this.http.get<ProductStock[]>(`${this.apiUrl}/low-stock`, { params });\r\n    }\r\n\r\n    initializeStock(request: InitializeStockRequest): Observable<ProductStock> {\r\n        return this.http.post<ProductStock>(`${this.apiUrl}/initialize`, request).pipe(\r\n            tap(() => this.toast.success('Stock initialized successfully', { title: 'ðŸ“¦ Stock Initialized' }))\r\n        );\r\n    }\r\n\r\n    estimateStock(request: AdjustStockRequest): Observable<ProductStock> {\r\n        return this.adjustStock(request);\r\n    }\r\n\r\n    increaseStock(request: AdjustStockRequest): Observable<ProductStock> {\r\n        return this.http.post<ProductStock>(`${this.apiUrl}/increase`, request).pipe(\r\n            tap(() => this.toast.success(`Stock increased by ${request.quantity}`, { title: 'ðŸ“ˆ Stock Increased' }))\r\n        );\r\n    }\r\n\r\n    decreaseStock(request: AdjustStockRequest): Observable<ProductStock> {\r\n        return this.http.post<ProductStock>(`${this.apiUrl}/decrease`, request).pipe(\r\n            tap(() => this.toast.warning(`Stock decreased by ${request.quantity}`, { title: 'ðŸ“‰ Stock Decreased' }))\r\n        );\r\n    }\r\n\r\n    adjustStock(request: AdjustStockRequest): Observable<ProductStock> {\r\n        const endpoints = {\r\n            0: 'increase',\r\n            1: 'decrease',\r\n            2: 'adjust'\r\n        };\r\n        const endpoint = endpoints[request.adjustmentType as keyof typeof endpoints];\r\n        return this.http.post<ProductStock>(`${this.apiUrl}/${endpoint}`, request).pipe(\r\n            tap(() => this.toast.success('Stock adjusted successfully', { title: 'ðŸ“Š Stock Adjusted' }))\r\n        );\r\n    }\r\n\r\n    transferStock(request: TransferStockRequest): Observable<any> {\r\n        return this.http.post(`${this.apiUrl}/transfer`, request).pipe(\r\n            tap(() => this.toast.success(`${request.quantity} units transferred successfully`, { title: 'ðŸ”„ Stock Transferred' }))\r\n        );\r\n    }\r\n\r\n    checkAvailability(productId: number, warehouseId: number, quantity: number): Observable<any> {\r\n        const params = new HttpParams()\r\n            .set('productId', productId)\r\n            .set('warehouseId', warehouseId)\r\n            .set('quantity', quantity);\r\n        return this.http.get(`${this.apiUrl}/check-availability`, { params });\r\n    }\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": []
}
