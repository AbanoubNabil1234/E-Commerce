{
  "version": 3,
  "sources": ["src/app/features/brands/services/brand.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable, switchMap, tap } from 'rxjs';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { LanguageService } from '../../../core/services/language.service';\r\nimport { NotificationService } from '../../../core/services/notification.service';\r\n\r\n/**\r\n * DTOs matching backend LocalizedBrandDto and BrandListDto\r\n */\r\nexport interface Brand {\r\n    id: number;\r\n    name: string;\r\n    slug: string;\r\n    description?: string;\r\n    logoUrl?: string;\r\n    website?: string;\r\n    languageCode: string;\r\n    isActive: boolean;\r\n    // Optional UI fields (not from backend API)\r\n    productsCount?: number;\r\n    createdAt?: Date;\r\n    updatedAt?: Date;\r\n    category?: string;\r\n}\r\n\r\nexport interface BrandListResponse {\r\n    items: Brand[];\r\n    totalCount: number;\r\n    pageNumber: number;\r\n    pageSize: number;\r\n    totalPages: number;\r\n    hasPreviousPage: boolean;\r\n    hasNextPage: boolean;\r\n}\r\n\r\nexport interface CreateBrandRequest {\r\n    name: string;\r\n    slug: string;\r\n    description?: string;\r\n    logoUrl?: string;\r\n    website?: string;\r\n    translations: BrandTranslation[];\r\n}\r\n\r\nexport interface UpdateBrandRequest {\r\n    id: number;\r\n    name: string;\r\n    slug: string;\r\n    description?: string;\r\n    logoUrl?: string;\r\n    website?: string;\r\n    isActive: boolean;\r\n    translations: BrandTranslation[];\r\n}\r\n\r\nexport interface BrandTranslation {\r\n    id?: number;\r\n    languageCode: string;\r\n    name: string;\r\n    description?: string;\r\n    slug: string;\r\n}\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class BrandService {\r\n    private readonly baseUrl = `${environment.apiUrl}/brands`;\r\n    private toast = inject(NotificationService);\r\n\r\n    constructor(\r\n        private http: HttpClient,\r\n        private languageService: LanguageService\r\n    ) { }\r\n\r\n    /**\r\n     * Get all active brands (localized)\r\n     */\r\n    getAll(): Observable<Brand[]> {\r\n        return this.http.get<Brand[]>(this.baseUrl);\r\n    }\r\n\r\n    /**\r\n     * Get paginated brands with optional filters\r\n     */\r\n    getPaged(\r\n        pageNumber: number = 1,\r\n        pageSize: number = 10,\r\n        search?: string,\r\n        isActive?: boolean\r\n    ): Observable<BrandListResponse> {\r\n        let params = new HttpParams()\r\n            .set('pageNumber', pageNumber.toString())\r\n            .set('pageSize', pageSize.toString());\r\n\r\n        if (search) {\r\n            params = params.set('search', search);\r\n        }\r\n\r\n        if (isActive !== undefined && isActive !== null) {\r\n            params = params.set('isActive', isActive.toString());\r\n        }\r\n\r\n        return this.http.get<BrandListResponse>(`${this.baseUrl}/paged`, { params });\r\n    }\r\n\r\n    /**\r\n     * Get brand by ID\r\n     */\r\n    getById(id: number): Observable<Brand> {\r\n        return this.http.get<Brand>(`${this.baseUrl}/${id}`);\r\n    }\r\n\r\n    /**\r\n     * Get brand by slug\r\n     */\r\n    getBySlug(slug: string): Observable<Brand> {\r\n        return this.http.get<Brand>(`${this.baseUrl}/slug/${slug}`);\r\n    }\r\n\r\n    /**\r\n     * Create a new brand\r\n     */\r\n    create(request: CreateBrandRequest): Observable<Brand> {\r\n        return this.http.post<Brand>(this.baseUrl, request).pipe(\r\n            tap(brand => this.toast.success(`Brand \"${brand.name}\" created successfully`, { title: 'üåü Brand Created' }))\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Update an existing brand\r\n     */\r\n    update(id: number, request: UpdateBrandRequest): Observable<Brand> {\r\n        return this.http.put<Brand>(`${this.baseUrl}/${id}`, request).pipe(\r\n            tap(() => this.toast.success('Brand updated successfully', { title: '‚úÖ Brand Updated' }))\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Delete a brand (soft delete by default)\r\n     */\r\n    delete(id: number, hardDelete: boolean = false): Observable<void> {\r\n        const params = new HttpParams().set('hardDelete', hardDelete.toString());\r\n        return this.http.delete<void>(`${this.baseUrl}/${id}`, { params }).pipe(\r\n            tap(() => this.toast.warning('Brand deleted', { title: 'üóëÔ∏è Brand Deleted' }))\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Toggle brand active status\r\n     */\r\n    toggleStatus(brand: Brand): Observable<Brand> {\r\n        const request: UpdateBrandRequest = {\r\n            id: brand.id,\r\n            name: brand.name,\r\n            slug: brand.slug,\r\n            description: brand.description,\r\n            logoUrl: brand.logoUrl,\r\n            website: brand.website,\r\n            isActive: !brand.isActive,\r\n            translations: []\r\n        };\r\n        return this.update(brand.id, request);\r\n    }\r\n\r\n    /**\r\n     * Reload data when language changes\r\n     * Returns an observable that emits new data on language switch\r\n     */\r\n    getPagedWithLanguageReload(\r\n        pageNumber: number = 1,\r\n        pageSize: number = 10,\r\n        search?: string,\r\n        isActive?: boolean\r\n    ): Observable<BrandListResponse> {\r\n        return this.languageService.currentLanguage$.pipe(\r\n            switchMap(() => this.getPaged(pageNumber, pageSize, search, isActive))\r\n        );\r\n    }\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAmEM,IAAO,eAAP,MAAO,cAAY;EAKT;EACA;EALK,UAAU,GAAG,YAAY,MAAM;EACxC,QAAQ,OAAO,mBAAmB;EAE1C,YACY,MACA,iBAAgC;AADhC,SAAA,OAAA;AACA,SAAA,kBAAA;EACR;;;;EAKJ,SAAM;AACF,WAAO,KAAK,KAAK,IAAa,KAAK,OAAO;EAC9C;;;;EAKA,SACI,aAAqB,GACrB,WAAmB,IACnB,QACA,UAAkB;AAElB,QAAI,SAAS,IAAI,WAAU,EACtB,IAAI,cAAc,WAAW,SAAQ,CAAE,EACvC,IAAI,YAAY,SAAS,SAAQ,CAAE;AAExC,QAAI,QAAQ;AACR,eAAS,OAAO,IAAI,UAAU,MAAM;IACxC;AAEA,QAAI,aAAa,UAAa,aAAa,MAAM;AAC7C,eAAS,OAAO,IAAI,YAAY,SAAS,SAAQ,CAAE;IACvD;AAEA,WAAO,KAAK,KAAK,IAAuB,GAAG,KAAK,OAAO,UAAU,EAAE,OAAM,CAAE;EAC/E;;;;EAKA,QAAQ,IAAU;AACd,WAAO,KAAK,KAAK,IAAW,GAAG,KAAK,OAAO,IAAI,EAAE,EAAE;EACvD;;;;EAKA,UAAU,MAAY;AAClB,WAAO,KAAK,KAAK,IAAW,GAAG,KAAK,OAAO,SAAS,IAAI,EAAE;EAC9D;;;;EAKA,OAAO,SAA2B;AAC9B,WAAO,KAAK,KAAK,KAAY,KAAK,SAAS,OAAO,EAAE,KAChD,IAAI,WAAS,KAAK,MAAM,QAAQ,UAAU,MAAM,IAAI,0BAA0B,EAAE,OAAO,0BAAkB,CAAE,CAAC,CAAC;EAErH;;;;EAKA,OAAO,IAAY,SAA2B;AAC1C,WAAO,KAAK,KAAK,IAAW,GAAG,KAAK,OAAO,IAAI,EAAE,IAAI,OAAO,EAAE,KAC1D,IAAI,MAAM,KAAK,MAAM,QAAQ,8BAA8B,EAAE,OAAO,uBAAiB,CAAE,CAAC,CAAC;EAEjG;;;;EAKA,OAAO,IAAY,aAAsB,OAAK;AAC1C,UAAM,SAAS,IAAI,WAAU,EAAG,IAAI,cAAc,WAAW,SAAQ,CAAE;AACvE,WAAO,KAAK,KAAK,OAAa,GAAG,KAAK,OAAO,IAAI,EAAE,IAAI,EAAE,OAAM,CAAE,EAAE,KAC/D,IAAI,MAAM,KAAK,MAAM,QAAQ,iBAAiB,EAAE,OAAO,gCAAmB,CAAE,CAAC,CAAC;EAEtF;;;;EAKA,aAAa,OAAY;AACrB,UAAM,UAA8B;MAChC,IAAI,MAAM;MACV,MAAM,MAAM;MACZ,MAAM,MAAM;MACZ,aAAa,MAAM;MACnB,SAAS,MAAM;MACf,SAAS,MAAM;MACf,UAAU,CAAC,MAAM;MACjB,cAAc,CAAA;;AAElB,WAAO,KAAK,OAAO,MAAM,IAAI,OAAO;EACxC;;;;;EAMA,2BACI,aAAqB,GACrB,WAAmB,IACnB,QACA,UAAkB;AAElB,WAAO,KAAK,gBAAgB,iBAAiB,KACzC,UAAU,MAAM,KAAK,SAAS,YAAY,UAAU,QAAQ,QAAQ,CAAC,CAAC;EAE9E;;qCAhHS,eAAY,mBAAA,UAAA,GAAA,mBAAA,eAAA,CAAA;EAAA;4EAAZ,eAAY,SAAZ,cAAY,WAAA,YAFT,OAAM,CAAA;;",
  "names": []
}
