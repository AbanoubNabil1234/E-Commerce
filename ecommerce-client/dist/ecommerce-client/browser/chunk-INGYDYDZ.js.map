{
  "version": 3,
  "sources": ["src/app/features/orders/services/orders.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable, tap } from 'rxjs';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { NotificationService } from '../../../core/services/notification.service';\r\nimport {\r\n    Order,\r\n    OrderListItem,\r\n    OrderFilter,\r\n    CreateOrderRequest,\r\n    AddOrderItemRequest,\r\n    UpdateOrderItemRequest,\r\n    OrderAvailabilityResult\r\n} from '../models/order.model';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class OrderService {\r\n    private http = inject(HttpClient);\r\n    private toast = inject(NotificationService);\r\n    private apiUrl = `${environment.apiUrl}/order`;\r\n\r\n    // Query Operations\r\n    getAll(filter?: OrderFilter): Observable<OrderListItem[]> {\r\n        let params = new HttpParams();\r\n\r\n        if (filter) {\r\n            if (filter.status) params = params.set('Status', filter.status);\r\n            if (filter.paymentStatus) params = params.set('PaymentStatus', filter.paymentStatus);\r\n            if (filter.warehouseId) params = params.set('WarehouseId', filter.warehouseId);\r\n            if (filter.customerId) params = params.set('CustomerId', filter.customerId);\r\n            if (filter.fromDate) params = params.set('FromDate', filter.fromDate);\r\n            if (filter.toDate) params = params.set('ToDate', filter.toDate);\r\n            if (filter.searchTerm) params = params.set('SearchTerm', filter.searchTerm);\r\n            if (filter.pageNumber) params = params.set('PageNumber', filter.pageNumber);\r\n            if (filter.pageSize) params = params.set('PageSize', filter.pageSize);\r\n        }\r\n\r\n        return this.http.get<OrderListItem[]>(this.apiUrl, { params });\r\n    }\r\n\r\n    getById(id: number): Observable<Order> {\r\n        return this.http.get<Order>(`${this.apiUrl}/${id}`);\r\n    }\r\n\r\n    getByOrderNumber(orderNumber: string): Observable<Order> {\r\n        return this.http.get<Order>(`${this.apiUrl}/by-number/${orderNumber}`);\r\n    }\r\n\r\n    checkAvailability(orderId: number): Observable<OrderAvailabilityResult> {\r\n        return this.http.get<OrderAvailabilityResult>(`${this.apiUrl}/${orderId}/availability`);\r\n    }\r\n\r\n    // Order Lifecycle\r\n    create(request: CreateOrderRequest): Observable<Order> {\r\n        return this.http.post<Order>(this.apiUrl, request).pipe(\r\n            tap(order => this.toast.success(`Order #${order.orderNumber} created successfully`, { title: 'üì¶ Order Created' }))\r\n        );\r\n    }\r\n\r\n    addItem(orderId: number, request: AddOrderItemRequest): Observable<Order> {\r\n        return this.http.post<Order>(`${this.apiUrl}/${orderId}/items`, request).pipe(\r\n            tap(() => this.toast.success('Item added to order', { title: '‚úÖ Item Added' }))\r\n        );\r\n    }\r\n\r\n    updateItem(orderId: number, itemId: number, request: UpdateOrderItemRequest): Observable<Order> {\r\n        return this.http.put<Order>(`${this.apiUrl}/${orderId}/items/${itemId}`, request).pipe(\r\n            tap(() => this.toast.success('Order item updated', { title: '‚úÖ Updated' }))\r\n        );\r\n    }\r\n\r\n    removeItem(orderId: number, itemId: number): Observable<Order> {\r\n        return this.http.delete<Order>(`${this.apiUrl}/${orderId}/items/${itemId}`).pipe(\r\n            tap(() => this.toast.info('Item removed from order', { title: 'üóëÔ∏è Item Removed' }))\r\n        );\r\n    }\r\n\r\n    confirm(orderId: number): Observable<Order> {\r\n        return this.http.post<Order>(`${this.apiUrl}/${orderId}/confirm`, {}).pipe(\r\n            tap(order => this.toast.success(`Order #${order.orderNumber} confirmed`, { title: '‚úÖ Order Confirmed' }))\r\n        );\r\n    }\r\n\r\n    cancel(orderId: number, reason: string): Observable<Order> {\r\n        return this.http.post<Order>(`${this.apiUrl}/${orderId}/cancel`, { reason }).pipe(\r\n            tap(order => this.toast.warning(`Order #${order.orderNumber} cancelled`, { title: '‚ùå Order Cancelled' }))\r\n        );\r\n    }\r\n\r\n    ship(orderId: number): Observable<Order> {\r\n        return this.http.post<Order>(`${this.apiUrl}/${orderId}/ship`, {}).pipe(\r\n            tap(order => this.toast.success(`Order #${order.orderNumber} shipped`, { title: 'üöö Order Shipped' }))\r\n        );\r\n    }\r\n\r\n    deliver(orderId: number): Observable<Order> {\r\n        return this.http.post<Order>(`${this.apiUrl}/${orderId}/deliver`, {}).pipe(\r\n            tap(order => this.toast.success(`Order #${order.orderNumber} delivered`, { title: '‚úÖ Order Delivered' }))\r\n        );\r\n    }\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": []
}
