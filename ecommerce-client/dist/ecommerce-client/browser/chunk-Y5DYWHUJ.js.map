{
  "version": 3,
  "sources": ["src/app/features/shipments/services/shipments.service.ts"],
  "sourcesContent": ["import { Injectable, inject } from '@angular/core';\r\nimport { HttpClient, HttpParams } from '@angular/common/http';\r\nimport { Observable, tap } from 'rxjs';\r\nimport { environment } from '../../../../environments/environment';\r\nimport { NotificationService } from '../../../core/services/notification.service';\r\nimport {\r\n    Shipment,\r\n    ShipmentListResponse,\r\n    ShipmentFilter,\r\n    CreateShipmentRequest,\r\n    AssignCarrierRequest,\r\n    UpdateStatusRequest,\r\n    AddTrackingEventRequest,\r\n    Carrier,\r\n    ShipmentTracking\r\n} from '../models/shipment.model';\r\n\r\n@Injectable({\r\n    providedIn: 'root'\r\n})\r\nexport class ShipmentsService {\r\n    private http = inject(HttpClient);\r\n    private toast = inject(NotificationService);\r\n    private baseUrl = `${environment.apiUrl}/shipments`;\r\n\r\n    // Query operations\r\n    getList(filter: ShipmentFilter): Observable<ShipmentListResponse> {\r\n        let params = new HttpParams()\r\n            .set('pageNumber', filter.pageNumber)\r\n            .set('pageSize', filter.pageSize);\r\n\r\n        if (filter.status) params = params.set('status', filter.status);\r\n        if (filter.warehouseId) params = params.set('warehouseId', filter.warehouseId);\r\n        if (filter.carrierId) params = params.set('carrierId', filter.carrierId);\r\n        if (filter.orderId) params = params.set('orderId', filter.orderId);\r\n        if (filter.search) params = params.set('search', filter.search);\r\n        if (filter.fromDate) params = params.set('fromDate', filter.fromDate);\r\n        if (filter.toDate) params = params.set('toDate', filter.toDate);\r\n\r\n        return this.http.get<ShipmentListResponse>(this.baseUrl, { params });\r\n    }\r\n\r\n    getById(id: number): Observable<Shipment> {\r\n        return this.http.get<Shipment>(`${this.baseUrl}/${id}`);\r\n    }\r\n\r\n    getTracking(id: number): Observable<ShipmentTracking[]> {\r\n        return this.http.get<ShipmentTracking[]>(`${this.baseUrl}/${id}/tracking`);\r\n    }\r\n\r\n    getByOrderId(orderId: number): Observable<Shipment[]> {\r\n        return this.http.get<Shipment[]>(`${this.baseUrl}/by-order/${orderId}`);\r\n    }\r\n\r\n    getCarriers(): Observable<Carrier[]> {\r\n        return this.http.get<Carrier[]>(`${this.baseUrl}/carriers`);\r\n    }\r\n\r\n    // Command operations\r\n    create(request: CreateShipmentRequest): Observable<Shipment> {\r\n        return this.http.post<Shipment>(this.baseUrl, request).pipe(\r\n            tap(shipment => this.toast.success(`Shipment #${shipment.trackingNumber} created`, { title: 'üöö Shipment Created' }))\r\n        );\r\n    }\r\n\r\n    assignCarrier(id: number, request: AssignCarrierRequest): Observable<Shipment> {\r\n        return this.http.put<Shipment>(`${this.baseUrl}/${id}/assign-carrier`, request).pipe(\r\n            tap(() => this.toast.success('Carrier assigned to shipment', { title: '‚úÖ Carrier Assigned' }))\r\n        );\r\n    }\r\n\r\n    updateStatus(id: number, request: UpdateStatusRequest): Observable<Shipment> {\r\n        return this.http.put<Shipment>(`${this.baseUrl}/${id}/status`, request).pipe(\r\n            tap(() => this.toast.info('Shipment status updated', { title: 'üì¶ Status Updated' }))\r\n        );\r\n    }\r\n\r\n    markAsShipped(id: number): Observable<Shipment> {\r\n        return this.http.post<Shipment>(`${this.baseUrl}/${id}/ship`, {}).pipe(\r\n            tap(shipment => this.toast.success(`Shipment #${shipment.trackingNumber} shipped`, { title: 'üöö Shipped' }))\r\n        );\r\n    }\r\n\r\n    markAsDelivered(id: number): Observable<Shipment> {\r\n        return this.http.post<Shipment>(`${this.baseUrl}/${id}/deliver`, {}).pipe(\r\n            tap(shipment => this.toast.success(`Shipment #${shipment.trackingNumber} delivered`, { title: '‚úÖ Delivered' }))\r\n        );\r\n    }\r\n\r\n    cancel(id: number, reason: string): Observable<Shipment> {\r\n        return this.http.post<Shipment>(`${this.baseUrl}/${id}/cancel`, { reason }).pipe(\r\n            tap(() => this.toast.warning('Shipment cancelled', { title: '‚ùå Cancelled' }))\r\n        );\r\n    }\r\n\r\n    // Add tracking event\r\n    addTrackingEvent(id: number, request: AddTrackingEventRequest): Observable<ShipmentTracking> {\r\n        return this.http.post<ShipmentTracking>(`${this.baseUrl}/${id}/track`, request).pipe(\r\n            tap(() => this.toast.info('Tracking event added', { title: 'üìç Tracking Updated' }))\r\n        );\r\n    }\r\n}\r\n\r\n"],
  "mappings": "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",
  "names": []
}
